## HHeuristics News

AI-updated news microsite for **HHeuristics**, designed for the `news.hheuristics.com` subdomain and deployed on **Cloudflare Workers**.

### What this Worker does

- **Aggregates live news** from multiple RSS sources (BBC, Reuters, AP, CNN and others).
- **Uses Cloudflare Workers AI** to generate neutral, 2–3 sentence summaries for an informed general audience.
- **Renders a responsive, branded HTML page** at `/` and exposes a machine-readable JSON endpoint at `/api/news`.
- **Refreshes content automatically** using a combination of in-memory caching and (optionally) a cron trigger.

---

### Local development

1. Install dependencies:

```bash
cd "HHeuristics News"
npm install
```

2. Make sure you are logged in to Cloudflare and have Workers + Workers AI enabled:

```bash
npx wrangler login
```

3. Start the dev server:

```bash
npm run dev
```

Wrangler will print a local URL (usually `http://127.0.0.1:8787`) where you can preview the news page.

---

### Cloudflare configuration

This repo is configured for a single Worker:

- Entry: `src/index.ts`
- Worker name: `hheuristics-news` (set in `wrangler.toml`)
- AI binding: `AI` (Workers AI)

`wrangler.toml` contains:

- `[ai]` section that binds Workers AI as `env.AI`.
- Basic branding variables (`SITE_NAME`, etc.) that you can tweak.
- A `[triggers]` block with a cron schedule (`*/30 * * * *`) so Cloudflare can periodically refresh the cached news (optional but recommended).

After connecting this repo to Cloudflare via **Workers → Deployments → Git integration**, each push to `main` will build and deploy automatically.

You can also deploy manually:

```bash
npm run deploy
```

---

### DNS and subdomain (`news.hheuristics.com`)

1. In Cloudflare, go to **Workers & Pages → your Worker (hheuristics-news) → Triggers → Custom Domains**.
2. Add a new custom domain and specify: `news.hheuristics.com`.
3. Cloudflare will create the necessary DNS records automatically.

Once the DNS change propagates, the Worker will be accessible at:

- Public: `https://news.hheuristics.com/`
- Health check: `https://news.hheuristics.com/health`
- JSON API: `https://news.hheuristics.com/api/news`

---

### Customisation

- **Branding**: Update `SITE_NAME`, `SITE_TAGLINE`, `PRIMARY_COLOR`, and `ACCENT_COLOR` in `wrangler.toml`.
- **Sources**: Edit the `RSS_SOURCES` array in `src/index.ts` to add or remove feeds.
- **Update cadence**: Change `CACHE_TTL_SECONDS` in `src/index.ts` and/or the cron schedule in `wrangler.toml`.
- **Copy & layout**: Adjust the markup and styles in `renderPage` in `src/index.ts` if you want a different layout.

---

### Notes and limits

- This Worker relies on RSS feeds that may change over time; failures are logged to `console.error` in the Worker.
- AI summaries are generated by Workers AI models (default `@cf/meta/llama-3.1-8b-instruct`); you can switch to another supported model in `src/index.ts`.
- This is **not** a replacement for primary reporting; always click through to the original articles for full context.


